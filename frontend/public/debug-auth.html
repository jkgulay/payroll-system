<!DOCTYPE html>
<html>
  <head>
    <title>Auth Debug</title>
  </head>
  <body>
    <h1>Authentication Debug</h1>
    <div id="output"></div>

    <script>
      const output = document.getElementById("output");

      function log(msg) {
        output.innerHTML += msg + "<br>";
        console.log(msg);
      }

      // Check localStorage
      log("=== localStorage Check ===");
      const token = localStorage.getItem("token");
      log("Token exists: " + !!token);
      if (token) {
        log("Token length: " + token.length);
        log("Token preview: " + token.substring(0, 50) + "...");
      }

      // Test API call
      log("<br>=== Testing Projects API ===");
      fetch("http://localhost:8000/api/projects", {
        method: "GET",
        headers: {
          Authorization: "Bearer " + token,
          Accept: "application/json",
          "Content-Type": "application/json",
        },
      })
        .then((response) => {
          log("Status: " + response.status);
          return response.json();
        })
        .then((data) => {
          log("Response: " + JSON.stringify(data, null, 2));
        })
        .catch((error) => {
          log("Error: " + error.message);
        });
    </script>
  </body>
</html>
